***************
*** 256,262 ****
          cur_rec = recoverables.begin();
          end_rec = recoverables.end();
          for(; cur_rec != end_rec; cur_rec++) {
-             uint32 quantity = cur_rec->amountPerBatch * efficiency * (1.0 - m_tax) * item->quantity() / item->type().portionSize();
              if(quantity == 0)
                  continue;
  
--- 256,262 ----
          cur_rec = recoverables.begin();
          end_rec = recoverables.end();
          for(; cur_rec != end_rec; cur_rec++) {
+             double quantity = cur_rec->amountPerBatch * efficiency * (1.0 - m_tax) * item->quantity() / item->type().portionSize();
              if(quantity == 0)
                  continue;
  
